% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/weightedVoronoi.R
\name{weighted_voronoi_domain}
\alias{weighted_voronoi_domain}
\title{Weighted tessellation in a constrained polygon domain}
\usage{
weighted_voronoi_domain(
  points_sf,
  weight_col,
  boundary_sf,
  res = 20,
  weight_transform = function(w) w,
  distance = c("euclidean", "geodesic"),
  max_dist = NULL,
  island_min_cells = 5,
  island_fill_iter = 50,
  clip_to_boundary = TRUE,
  close_mask = TRUE,
  close_iters = 1,
  verbose = TRUE
)
}
\arguments{
\item{points_sf}{An \code{sf} POINT object containing generator locations and attributes.}

\item{weight_col}{Character. Name of the weight column in \code{points_sf}.}

\item{boundary_sf}{An \code{sf} POLYGON/MULTIPOLYGON defining the domain.}

\item{res}{Numeric. Raster resolution in CRS units (e.g. metres).}

\item{weight_transform}{Function. Transforms weights before allocation. Must return
finite, strictly positive values.}

\item{distance}{Character. One of \code{"euclidean"} or \code{"geodesic"}.}

\item{max_dist}{Optional numeric. Maximum Euclidean distance to consider (euclidean only).}

\item{island_min_cells}{Integer. Minimum patch size used in island removal.}

\item{island_fill_iter}{Integer. Maximum iterations for filling reassigned cells.}

\item{clip_to_boundary}{Logical. If \code{TRUE}, polygon output is intersected with the
input boundary for exact edge matching (euclidean only).}

\item{close_mask}{Logical. If \code{TRUE}, applies a morphological closing to the raster
mask (geodesic only).}

\item{close_iters}{Integer. Number of closing iterations (geodesic only).}

\item{verbose}{Logical. If \code{TRUE}, prints progress.}
}
\value{
A list with elements including:
\describe{
\item{polygons}{An \code{sf} object with one polygon per generator.}
\item{allocation}{A \code{terra::SpatRaster} assigning each cell to a generator.}
\item{summary}{A generator-level summary table.}
\item{diagnostics}{A list of diagnostic metrics and settings.}
}
}
\description{
Creates a complete, connected tessellation of a polygonal domain using either
weighted Euclidean distance or weighted geodesic (domain-constrained) distance.
Weights are supplied as an attribute of generator points and can be transformed
by a user-defined function prior to allocation.
}
\examples{
\dontrun{
library(sf)
crs_use <- 32636
boundary_sf <- st_sf(
  geometry = st_sfc(st_polygon(list(rbind(
    c(0,0), c(1000,0), c(1000,1000), c(0,1000), c(0,0)
  )))),
  crs = crs_use
)
points_sf <- st_sf(
  population = c(50, 200, 1000),
  geometry = st_sfc(st_point(c(200,200)), st_point(c(800,250)), st_point(c(500,500))),
  crs = crs_use
)
out <- weighted_voronoi_domain(points_sf, "population", boundary_sf,
  res = 20, weight_transform = log10, distance = "euclidean", verbose = FALSE
)
}
}
